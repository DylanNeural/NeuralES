<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Helmet Model Viewer</title>
    <style>
        * { margin: 0; padding: 0; }
        body { font-family: Arial; background: #f5f5f5; }
        #canvas { display: block; width: 100%; height: 100vh; }
        #info { position: absolute; top: 10px; left: 10px; background: white; padding: 10px; border-radius: 5px; max-width: 400px; max-height: 300px; overflow-y: auto; font-size: 12px; }
    </style>
</head>
<body>
    <div id="canvas"></div>
    <div id="info">
        <h3>Helmet Model Positions</h3>
        <p>Ouverture console (F12) pour voir toutes les positions...</p>
        <div id="list"></div>
    </div>

    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@r128/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@r128/examples/jsm/"
        }
    }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';

        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0xf8f9fb);

        const camera = new THREE.PerspectiveCamera(40, window.innerWidth / window.innerHeight, 0.1, 100);
        camera.position.set(0, 0, 200);

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.getElementById('canvas').appendChild(renderer.domElement);

        // Lights
        scene.add(new THREE.AmbientLight(0xffffff, 0.8));
        scene.add(new THREE.DirectionalLight(0xffffff, 1.0));

        const loader = new GLTFLoader();
        loader.load('Casque&ele.glb', (gltf) => {
            const model = gltf.scene;
            scene.add(model);

            const eholders = [];
            model.traverse((obj) => {
                if (obj.isMesh && obj.name.toLowerCase().includes('eholder')) {
                    const pos = new THREE.Vector3();
                    obj.getWorldPosition(pos);
                    eholders.push({
                        name: obj.name,
                        position: pos
                    });
                }
            });

            console.log(`Found ${eholders.length} Eholder meshes:`);
            eholders.forEach((eh, i) => {
                console.log(`[${i}] ${eh.name} at (${eh.position.x.toFixed(2)}, ${eh.position.y.toFixed(2)}, ${eh.position.z.toFixed(2)})`);
            });

            // Display in HTML
            let html = `<p><strong>${eholders.length} Eholders found:</strong></p>`;
            eholders.forEach((eh, i) => {
                html += `<p>[${i}] ${eh.name}<br/>X: ${eh.position.x.toFixed(2)}, Y: ${eh.position.y.toFixed(2)}, Z: ${eh.position.z.toFixed(2)}</p>`;
            });
            document.getElementById('list').innerHTML = html;

            renderer.render(scene, camera);
        });

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        function animate() {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        }
        animate();
    </script>
</body>
</html>
